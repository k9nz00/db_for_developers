### Задание 1

Перечислите четыре основных требования к системам транзакций и опишите, что они гарантируют.

Ответ

Основные требования к системам транзакций описывается аббревиатурой - ACID
A - Атомарность операций. Система должна находиться в дискретных состояниях, переходя от одного к другому. Промежуточных
состояний не может быть. Операция (цепочка операций) или выполняется полностью с фиксацией результата или все изменения
отменяются, не оставляя никаких следов.
C - Консистентность (Согласованность). Вытекает из предыдущего, и утверждает, что благодаря тому, что транзакция не
допускает промежуточных результатов, база остается консистентной. То есть до выполнения операции
и после база остается консистентной (согласованной).
I - Изолированность. Во время выполнения транзакции другие параллельные транзакции не должны оказывать влияние на
первую.
D - Прочность (целостность). После фиксации результатов транзакции должны предоставляться гарантии, что изменения,
внесенные этой транзакцией не будут отменены сбоем в системе

### Задание 2

На сервере установлена настройка autocommit=0. Не меняя её, напишите транзакцию, которая удалит пять случайных записей
из user. В конце откатите транзакцию, не фиксируя результат.

Ответ

```sql
SET AUTOCOMMIT = 0;
START TRANSACTION;

WITH random_user_ids AS (SELECT user_id FROM user ORDER BY RAND() LIMIT 5)
DELETE
FROM user
WHERE user_id IN (SELECT * FROM random_user_ids);

ROLLBACK;
```

### Задание 3

В БД необходимо проводить транзакции, в которых не должно быть «грязного» и фантомного чтения. Операции чтения внутри
транзакции должны возвращать один и тот же результат. Напишите команду, которая глобально устанавливает нужный уровень
изоляции.

Ответ

```sql
SET GLOBAL TRANSACTION ISOLATION LEVEL REPEATABLE READ;
```

### Задание 4

Напишите запрос на выборку всех дискуссионных групп для обновления. При этом запрос не должен:

1. зависать в ожидании разблокировки нужных записей
2. выбирать уже заблокированные записи, если они уже есть.

Ответ

```sql
SELECT *
FROM discussion_group FOR
UPDATE SKIP LOCKED;
```